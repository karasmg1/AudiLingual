var mp3files = {		"fileNameRus" : "One",		"fileNameLang" : "Two",		"errorText" : ""	}function showmp3(stringRus, stringLang, langName, fileName, handleData) {//	if(debug) alert(arguments.callee.toString().substring(9, arguments.callee.toString().indexOf('(')));	$.ajax({		type : 'POST',		url : '/save-url-to-file.php', 		cache : false,		data : {			strRus : stringRus,			strLang : stringLang,			lang : langName,			file : fileName		},		success : function(data) {			handleData(data);			// data ответ от сервера в формате json массива, сразу заносим в переменную		}	});	 }function getzipmp3() {//	if(debug) alert(arguments.callee.toString().substring(9, arguments.callee.toString().indexOf('(')));var userfile = $('input[name=userfile]').val();	$.ajax({		type : 'POST',		url : '/upload.php', 		cache : false,		data : {			userfile : userfile		},		success : function(data) {			$('#TranslateRuWidget').html(data);			// data ответ от сервера в формате json массива, сразу заносим в переменную		}	});	 }function delAllMp3() {//	if(debug) alert(arguments.callee.toString().substring(9, arguments.callee.toString().indexOf('(')));	$.ajax({		type : 'GET',		url : '/delAllMp3.php', 		cache : false,		data : {		},		success : function(data) {			//alert("Файлы удалены");			// data ответ от сервера в формате json массива, сразу заносим в переменную		}	});	 }$(document).ready(function() {$('#mp3files').hide();$('.form-group').click(function(e) {	$('#mp3files').hide();	delAllMp3();});	$('.dropdown-menu li a').click(function(e) {	//e.stopPropagation();		var name = $(this).text();//		alert(name);		$(this).closest('.btn-group').find('.dropdown-toggle').html(name+' <span class="fa fa-caret-down">');		$('#language').val(name);});	$("#form").submit(function(e){		var strRus = $('#rus-text').val();		var strLang = $('#lang-text').val();		var lang = $('#language').val();		var file = $('#file-name').val();		showmp3(strRus, strLang, lang, file, 		function(output){		//alert(output);		try{		mp3files = $.parseJSON(output);		}		catch (exception_var){			alert('Сервер вернул ошибку, проверьте введенные данные');			$('#mp3files').hide();					mp3files = {		"fileNameRus" : "One",		"fileNameLang" : "Two",		"errorText" : ""	}		}			if(!!mp3files.errorText) {				if(mp3files.errorText=="Все ок"){					 $('#result-mp3').html('<h4 contenteditable="true">Файлы для скачивания:</h4><ul><li id="mp3-file1"><a href="..">One</a></li><li id="mp3-file2"><a href="..">Two</a></li></ul>');						$('#mp3-file1 a').attr('href', mp3files.fileNameRus+'.mp3');						$('#mp3-file1 a').html(mp3files.fileNameRus+'.mp3');						$('#mp3-file1 a').attr('download', mp3files.fileNameRus+'.mp3');									$('#mp3-file2 a').attr('href', mp3files.fileNameLang+'.mp3');						$('#mp3-file2 a').html(mp3files.fileNameLang+'.mp3');						$('#mp3-file2 a').attr('download', mp3files.fileNameLang+'.mp3');						$('#mp3files').show();										}				else alert(mp3files.errorText);							}						});			return false;	});	var files;	$('input[type=file]').change(function(){    files = this.files;	//alert(files);	});		$("#form-packet").submit(function(e){			e.stopPropagation(); // Остановка происходящего			e.preventDefault();  			var data = new FormData();			$.each( files, function( key, value ){			data.append( key, value );			});			data.append("lang", $('#language').val());			$.ajax({				url: '/upload.php',				type: 'POST',				data: data,				cache: false,				processData: false, // Не обрабатываем файлы (Don't process the files)				contentType: false, // Так jQuery скажет серверу что это строковой запрос				success: function(data){					 //alert("pltcm vspace");					 $('#respond').html(data);					}			});						$('#respond').text('Подождите пока загрузиться файл...');						//getzipmp3();			return false;		});});